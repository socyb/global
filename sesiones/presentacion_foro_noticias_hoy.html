<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Presentación de clase: relevancia de las noticias publicadas en el foro del curso Globalización y Empleo." />
  <title>Clase de 26 de febrero de 2026 · Relevancia del Foro de Noticias</title>
  <style>
    :root {
      --paper: #f4f1e8;
      --ink: #1b1915;
      --muted: #5c564c;
      --line: rgba(27, 25, 21, 0.16);
      --card: rgba(255, 255, 255, 0.9);
      --cyan: #0f5a78;
      --terracotta: #bb4f31;
      --olive: #4f7044;
      --gold: #9a741f;
      --plum: #593f79;
      --shadow: 0 16px 44px rgba(0, 0, 0, 0.16);
    }

    * {
      box-sizing: border-box;
    }

    html,
    body {
      margin: 0;
      min-height: 100%;
    }

    body {
      color: var(--ink);
      font-family: "Avenir Next Condensed", "Gill Sans Nova", "Trebuchet MS", sans-serif;
      background:
        radial-gradient(circle at 8% 8%, rgba(15, 90, 120, 0.2), transparent 34%),
        radial-gradient(circle at 88% 10%, rgba(187, 79, 49, 0.17), transparent 36%),
        linear-gradient(162deg, #efe7d8 0%, #dbe8df 48%, #f4efe2 100%);
      padding: clamp(8px, 1.5vw, 16px);
      overflow: hidden;
    }

    .deck {
      width: min(1460px, 100%);
      margin: 0 auto;
      height: min(94vh, 920px);
      border: 1px solid rgba(0, 0, 0, 0.2);
      border-radius: 20px;
      background: rgba(250, 248, 243, 0.9);
      box-shadow: var(--shadow);
      overflow: hidden;
      position: relative;
      display: grid;
      grid-template-rows: auto 1fr auto;
    }

    .topbar,
    .bottombar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      padding: 10px 16px;
      border-bottom: 1px solid var(--line);
      background: rgba(252, 250, 246, 0.92);
      z-index: 12;
    }

    .bottombar {
      border-top: 1px solid var(--line);
      border-bottom: 0;
      font-size: 0.84rem;
      color: #403b34;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 0.9rem;
      font-weight: 700;
      letter-spacing: 0.03em;
    }

    .brand-mark {
      width: 22px;
      height: 22px;
      border-radius: 4px;
      background: linear-gradient(145deg, var(--cyan), var(--terracotta));
      border: 1px solid rgba(0, 0, 0, 0.2);
      transform: rotate(8deg);
    }

    .context {
      font-size: 0.8rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.09em;
      color: #3f4e48;
      border: 1px solid rgba(0, 0, 0, 0.16);
      border-radius: 999px;
      padding: 6px 11px;
      background: rgba(255, 255, 255, 0.8);
    }

    .progress-wrap {
      display: flex;
      align-items: center;
      gap: 10px;
      min-width: 220px;
      max-width: 440px;
      width: 34vw;
    }

    .progress-track {
      flex: 1;
      height: 8px;
      border-radius: 999px;
      background: rgba(0, 0, 0, 0.12);
      overflow: hidden;
    }

    .progress-bar {
      height: 100%;
      width: 0;
      background: linear-gradient(90deg, var(--cyan), #25b0c8);
      transition: width 0.28s ease;
    }

    .progress-label {
      min-width: 48px;
      text-align: right;
      font-size: 0.8rem;
      font-weight: 800;
      color: #2c312d;
    }

    .stage {
      position: relative;
      overflow: hidden;
      background:
        radial-gradient(circle at 5% 90%, rgba(79, 112, 68, 0.11), transparent 32%),
        radial-gradient(circle at 95% 88%, rgba(89, 63, 121, 0.1), transparent 32%);
    }

    .slide {
      position: absolute;
      inset: 0;
      opacity: 0;
      pointer-events: none;
      transform: translateX(4%);
      transition: opacity 0.3s ease, transform 0.3s ease;
      padding: clamp(18px, 2.4vw, 34px);
      display: grid;
      grid-template-rows: auto 1fr;
      gap: 14px;
    }

    .slide.active {
      opacity: 1;
      pointer-events: auto;
      transform: translateX(0);
    }

    .slide-tag {
      margin: 0;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      width: fit-content;
      font-size: 0.78rem;
      font-weight: 800;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      border: 1px solid rgba(0, 0, 0, 0.16);
      border-radius: 999px;
      padding: 6px 10px;
      background: rgba(255, 255, 255, 0.84);
      color: #2f3632;
    }

    .slide-main {
      min-height: 0;
      display: grid;
      align-content: start;
      gap: 12px;
    }

    .title {
      margin: 0;
      font-family: "Bodoni 72", "Didot", "Times New Roman", serif;
      font-size: clamp(2rem, 4vw, 4rem);
      line-height: 0.98;
      max-width: 15ch;
      text-wrap: balance;
    }

    .subtitle {
      margin: 0;
      font-size: clamp(1rem, 1.45vw, 1.42rem);
      line-height: 1.35;
      max-width: 68ch;
      color: #2f2d29;
    }

    .grid-two {
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 0.85fr);
      gap: 14px;
      align-items: start;
    }

    .card {
      border: 1px solid rgba(0, 0, 0, 0.16);
      border-radius: 14px;
      background: var(--card);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
      padding: 12px;
      display: grid;
      gap: 8px;
    }

    .card h3,
    .card h4 {
      margin: 0;
      font-size: clamp(1.04rem, 1.35vw, 1.38rem);
      line-height: 1.12;
    }

    .card p {
      margin: 0;
      font-size: clamp(0.92rem, 1.05vw, 1.09rem);
      line-height: 1.34;
      color: #32302b;
    }

    .pill-row {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      align-items: center;
    }

    .pill {
      border: 1px solid rgba(0, 0, 0, 0.16);
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.88);
      padding: 6px 9px;
      font-size: 0.8rem;
      font-weight: 700;
      color: #2f2b25;
    }

    .def-btn {
      border: 1px dashed rgba(0, 0, 0, 0.22);
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.9);
      color: #0e5673;
      font: inherit;
      font-weight: 700;
      padding: 6px 10px;
      cursor: pointer;
    }

    .def-btn:hover {
      background: #fff;
    }

    .stat-grid {
      display: grid;
      grid-template-columns: repeat(4, minmax(130px, 1fr));
      gap: 10px;
    }

    .stat {
      border: 1px solid rgba(0, 0, 0, 0.16);
      border-radius: 12px;
      background: rgba(255, 255, 255, 0.9);
      padding: 10px;
      display: grid;
      gap: 3px;
    }

    .stat strong {
      font-size: clamp(1.2rem, 2.2vw, 2rem);
      line-height: 1;
    }

    .stat span {
      font-size: 0.73rem;
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 0.07em;
      color: var(--muted);
    }

    .list {
      margin: 0;
      padding-left: 18px;
      display: grid;
      gap: 6px;
      font-size: clamp(0.92rem, 1.05vw, 1.08rem);
      line-height: 1.34;
    }

    .axis-list {
      margin: 0;
      padding: 0;
      list-style: none;
      display: grid;
      gap: 7px;
    }

    .axis-item {
      border: 1px solid rgba(0, 0, 0, 0.15);
      border-radius: 10px;
      background: rgba(255, 255, 255, 0.9);
      padding: 8px;
      display: grid;
      gap: 5px;
    }

    .axis-line {
      width: 100%;
      height: 8px;
      border-radius: 999px;
      background: rgba(0, 0, 0, 0.12);
      overflow: hidden;
    }

    .axis-line i {
      display: block;
      height: 100%;
      border-radius: 999px;
      background: linear-gradient(90deg, var(--cyan), var(--terracotta));
      width: 0;
      transition: width 0.4s ease;
    }

    .network-wrap {
      border: 1px solid rgba(0, 0, 0, 0.16);
      border-radius: 16px;
      background: rgba(255, 255, 255, 0.88);
      overflow: hidden;
      min-height: 360px;
      display: grid;
      place-items: center;
      position: relative;
    }

    .network-svg {
      width: 100%;
      height: 100%;
      min-height: 360px;
    }

    .edge {
      stroke: rgba(15, 90, 120, 0.5);
      stroke-width: 2;
      stroke-dasharray: 6 6;
      animation: flow 4s linear infinite;
    }

    .node {
      fill: #fff;
      stroke: rgba(0, 0, 0, 0.26);
      stroke-width: 1.5;
    }

    .pulse {
      fill: none;
      stroke: rgba(15, 90, 120, 0.35);
      stroke-width: 2;
      transform-origin: center;
      animation: pulse 2.8s ease-out infinite;
    }

    .node-label {
      font-family: "Avenir Next Condensed", "Gill Sans Nova", "Trebuchet MS", sans-serif;
      font-size: 13px;
      fill: #2b2924;
      font-weight: 700;
    }

    @keyframes flow {
      to {
        stroke-dashoffset: -24;
      }
    }

    @keyframes pulse {
      0% {
        opacity: 0.7;
        transform: scale(0.8);
      }
      100% {
        opacity: 0;
        transform: scale(1.32);
      }
    }

    .orbit {
      position: absolute;
      border-radius: 50%;
      pointer-events: none;
      border: 1px solid rgba(0, 0, 0, 0.1);
      animation: spin 18s linear infinite;
    }

    .orbit.one {
      width: 220px;
      height: 220px;
      top: -110px;
      right: -40px;
    }

    .orbit.two {
      width: 170px;
      height: 170px;
      bottom: -82px;
      left: -52px;
      animation-duration: 15s;
      animation-direction: reverse;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    .actions {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 9px;
      flex-wrap: wrap;
    }

    .actions button {
      border: 1px solid rgba(0, 0, 0, 0.2);
      border-radius: 10px;
      background: rgba(255, 255, 255, 0.9);
      color: #1f1b17;
      font: inherit;
      font-weight: 700;
      font-size: 0.9rem;
      padding: 8px 14px;
      cursor: pointer;
    }

    .actions button.primary {
      background: #133c4f;
      color: #fff;
      border-color: transparent;
    }

    .footer-tools {
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .footer-tools button {
      border: 1px solid rgba(0, 0, 0, 0.2);
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.9);
      color: #1f1b17;
      font: inherit;
      font-weight: 700;
      font-size: 0.8rem;
      padding: 6px 10px;
      cursor: pointer;
    }

    .footer-tools button:hover {
      background: #fff;
    }

    .hint {
      margin: 0;
      font-size: 0.82rem;
      color: #4f4940;
      text-align: center;
    }

    .case-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 10px;
    }

    .case-card {
      border: 1px solid rgba(0, 0, 0, 0.16);
      border-radius: 14px;
      background: rgba(255, 255, 255, 0.92);
      padding: 10px;
      display: grid;
      gap: 7px;
      box-shadow: 0 8px 18px rgba(0, 0, 0, 0.08);
    }

    .case-kicker {
      width: fit-content;
      border-radius: 999px;
      border: 1px solid rgba(0, 0, 0, 0.16);
      background: rgba(255, 255, 255, 0.88);
      padding: 4px 8px;
      font-size: 0.72rem;
      font-weight: 800;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: #32433e;
    }

    .case-card h4 {
      margin: 0;
      font-size: clamp(0.98rem, 1.25vw, 1.26rem);
      line-height: 1.16;
    }

    .case-meta {
      margin: 0;
      font-size: 0.8rem;
      color: #4f4a42;
    }

    .case-excerpt {
      margin: 0;
      font-size: 0.9rem;
      line-height: 1.33;
      color: #2d2a25;
    }

    .compare-table-wrap {
      border: 1px solid rgba(0, 0, 0, 0.16);
      border-radius: 14px;
      background: rgba(255, 255, 255, 0.92);
      overflow: auto;
      box-shadow: 0 8px 18px rgba(0, 0, 0, 0.08);
    }

    table.compare-table {
      width: 100%;
      border-collapse: collapse;
      min-width: 900px;
      font-size: clamp(0.86rem, 1vw, 1rem);
      line-height: 1.32;
    }

    .compare-table th,
    .compare-table td {
      border: 1px solid rgba(0, 0, 0, 0.13);
      vertical-align: top;
      text-align: left;
      padding: 8px;
    }

    .compare-table th {
      background: rgba(241, 245, 243, 0.96);
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: #2f3c37;
    }

    .question-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 10px;
    }

    .question-card {
      border: 1px solid rgba(0, 0, 0, 0.16);
      border-radius: 12px;
      background: rgba(255, 255, 255, 0.91);
      padding: 10px;
      display: grid;
      gap: 7px;
    }

    .question-card h4 {
      margin: 0;
      font-size: 1rem;
      line-height: 1.2;
    }

    .question-card p {
      margin: 0;
      font-size: 0.9rem;
      line-height: 1.33;
      color: #302c26;
    }

    .modal {
      position: fixed;
      inset: 0;
      z-index: 9999;
      display: none;
      align-items: center;
      justify-content: center;
    }

    .modal[data-open="true"] {
      display: flex;
    }

    .modal-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(8, 12, 16, 0.62);
      backdrop-filter: blur(2px);
    }

    .modal-card {
      position: relative;
      z-index: 1;
      width: min(760px, calc(100vw - 24px));
      border: 1px solid rgba(0, 0, 0, 0.22);
      border-radius: 14px;
      background: rgba(251, 249, 244, 0.97);
      box-shadow: 0 20px 44px rgba(0, 0, 0, 0.28);
      padding: 14px;
      display: grid;
      gap: 9px;
    }

    .modal-card h3 {
      margin: 0;
      font-size: clamp(1.24rem, 2vw, 1.8rem);
      line-height: 1.1;
    }

    .modal-card p {
      margin: 0;
      font-size: clamp(0.95rem, 1.12vw, 1.15rem);
      line-height: 1.36;
      color: #292620;
    }

    .modal-close {
      justify-self: end;
      border: 1px solid rgba(0, 0, 0, 0.2);
      border-radius: 9px;
      background: #153f53;
      color: #fff;
      font: inherit;
      font-weight: 700;
      padding: 7px 11px;
      cursor: pointer;
    }

    @media (max-width: 1050px) {
      .grid-two {
        grid-template-columns: 1fr;
      }

      .stat-grid {
        grid-template-columns: repeat(2, minmax(120px, 1fr));
      }

      .case-grid,
      .question-grid {
        grid-template-columns: 1fr;
      }

      .deck {
        height: min(96vh, 980px);
      }
    }

    @media (max-width: 760px) {
      body {
        padding: 0;
      }

      .deck {
        border-radius: 0;
        height: 100vh;
      }

      .topbar,
      .bottombar {
        flex-wrap: wrap;
      }

      .progress-wrap {
        width: 100%;
        max-width: none;
      }

      .title {
        font-size: clamp(1.8rem, 7.4vw, 2.9rem);
      }
    }
  </style>
</head>
<body>
  <div class="deck" id="deck">
    <header class="topbar">
      <div class="brand">
        <span class="brand-mark" aria-hidden="true"></span>
        <span>Globalización y Empleo · Negocios Internacionales</span>
      </div>
      <div class="context">Sesión del 26 de febrero de 2026 · Foro de noticias</div>
      <div class="progress-wrap">
        <div class="progress-track"><div class="progress-bar" id="progressBar"></div></div>
        <div class="progress-label" id="progressLabel">1/6</div>
      </div>
    </header>

    <main class="stage" id="stage">
      <section class="slide active" data-slide>
        <p class="slide-tag">Punto de partida</p>
        <div class="slide-main">
          <h1 class="title">Lo que su foro ya está enseñando del mundo real</h1>
          <p class="subtitle">Estas noticias no son “extras”. Son evidencia viva para discutir <button class="def-btn" data-def="globalizacion">globalización</button>, poder, regulación y empleo desde casos actuales que ustedes mismos ya seleccionaron.</p>
          <div class="grid-two">
            <article class="card">
              <h3>Hoy abrimos la clase desde su trabajo</h3>
              <p>Vamos a leer sus aportes como lo haría un analista internacional: identificando actores, escalas, conflictos, instituciones y efectos sociales.</p>
              <div class="pill-row">
                <span class="pill">Fuente real</span>
                <span class="pill">Criterio propio</span>
                <span class="pill">Conexión con teoría</span>
              </div>
            </article>
            <article class="card">
              <h3>Mini-meta de hoy</h3>
              <p>Que cada quien pueda explicar una noticia con tres niveles: qué pasó, qué revela del sistema global y por qué importa para empleo/sociedad.</p>
              <div class="pill-row">
                <button class="def-btn" data-def="gobernanza">Definición: gobernanza</button>
                <button class="def-btn" data-def="multipolaridad">Definición: multipolaridad</button>
              </div>
            </article>
          </div>
        </div>
      </section>

      <section class="slide" data-slide>
        <p class="slide-tag">Relevancia</p>
        <div class="slide-main">
          <h2 class="title">¿Por qué son tan importantes estas noticias en este curso?</h2>
          <div class="grid-two">
            <article class="card">
              <h3>1) Conectan teoría con coyuntura</h3>
              <p>El curso deja de ser abstracto cuando una nota concreta muestra cómo actúan estados, empresas y organismos en tiempo real.</p>
              <h3>2) Entrenan criterio de fuente</h3>
              <p>Comparar medios, sesgos y evidencia fortalece pensamiento crítico profesional.</p>
              <h3>3) Obligan a sintetizar y argumentar</h3>
              <p>Explicar una noticia en 5 líneas mejora claridad analítica para cualquier entorno laboral.</p>
            </article>
            <article class="card">
              <h3>4) Revelan ejes del curso en acción</h3>
              <ul class="list">
                <li>Regulación y <button class="def-btn" data-def="gobernanza">gobernanza</button>.</li>
                <li>Transformación tecnológica e IA.</li>
                <li>Mercados de trabajo y desigualdad.</li>
                <li>Geopolítica y reconfiguración de bloques.</li>
              </ul>
              <p><strong>Idea central:</strong>las noticias ya son un laboratorio aplicado del curso.</p>
            </article>
          </div>
        </div>
      </section>

      <section class="slide" data-slide>
        <p class="slide-tag">Radiografía del foro</p>
        <div class="slide-main">
          <h2 class="title">¿Qué construyó ya el grupo con sus aportes?</h2>
          <div class="stat-grid" id="statsGrid"></div>
          <div class="grid-two">
            <article class="card">
              <h3>Participación y diversidad</h3>
              <p id="participationText">Cargando datos del foro...</p>
              <div class="pill-row">
                <span class="pill" id="latestDatePill">Corte: --</span>
                <span class="pill" id="topSourcePill">Fuente líder: --</span>
              </div>
            </article>
            <article class="card">
              <h3>Lo que esto significa para clase</h3>
              <p>Ya tenemos base suficiente para comparar enfoques: no una sola narrativa, sino varias ventanas del mismo sistema global.</p>
              <button class="def-btn" data-def="cadena_suministro">Definición: cadena de suministro</button>
            </article>
          </div>
        </div>
      </section>

      <section class="slide" data-slide>
        <p class="slide-tag">Ejes que emergen</p>
        <div class="slide-main">
          <h2 class="title">Temas del curso que más se están activando</h2>
          <div class="grid-two">
            <article class="card">
              <h3>Ejes principales detectados</h3>
              <ul class="axis-list" id="axisList"></ul>
            </article>
            <article class="card">
              <h3>Interpretación</h3>
              <p>No están leyendo noticias aisladas. Están construyendo una conversación que cruza trabajo, poder, regulación, tecnología y territorio.</p>
              <p>Cuando un eje aparece repetidamente, se vuelve una pista fuerte de cómo se está reconfigurando la globalización.</p>
              <div class="pill-row">
                <button class="def-btn" data-def="regulacion_privada">Definición: regulación privada</button>
                <button class="def-btn" data-def="riesgo_sistemico">Definición: riesgo sistémico</button>
              </div>
            </article>
          </div>
        </div>
      </section>

      <section class="slide" data-slide>
        <p class="slide-tag">Relaciones entre noticias</p>
        <div class="slide-main">
          <h2 class="title">No son notas sueltas: forman una red de problemas conectados</h2>
          <div class="network-wrap">
            <span class="orbit one" aria-hidden="true"></span>
            <span class="orbit two" aria-hidden="true"></span>
            <svg class="network-svg" viewBox="0 0 900 420" role="img" aria-label="Red de ejes temáticos conectados">
              <line class="edge" x1="130" y1="110" x2="350" y2="85"></line>
              <line class="edge" x1="130" y1="110" x2="280" y2="255"></line>
              <line class="edge" x1="350" y1="85" x2="560" y2="160"></line>
              <line class="edge" x1="280" y1="255" x2="560" y2="160"></line>
              <line class="edge" x1="560" y1="160" x2="760" y2="260"></line>
              <line class="edge" x1="350" y1="85" x2="760" y2="260"></line>

              <g transform="translate(130 110)">
                <circle class="pulse" r="46"></circle>
                <circle class="node" r="34" fill="#f6f0e6"></circle>
                <text class="node-label" text-anchor="middle" dy="5">Regulación</text>
              </g>
              <g transform="translate(350 85)">
                <circle class="pulse" r="42"></circle>
                <circle class="node" r="31" fill="#eef4f7"></circle>
                <text class="node-label" text-anchor="middle" dy="5">Geopolítica</text>
              </g>
              <g transform="translate(280 255)">
                <circle class="pulse" r="40"></circle>
                <circle class="node" r="30" fill="#edf5eb"></circle>
                <text class="node-label" text-anchor="middle" dy="5">Empleo</text>
              </g>
              <g transform="translate(560 160)">
                <circle class="pulse" r="48"></circle>
                <circle class="node" r="36" fill="#eef0f8"></circle>
                <text class="node-label" text-anchor="middle" dy="5">Tecnología</text>
              </g>
              <g transform="translate(760 260)">
                <circle class="pulse" r="44"></circle>
                <circle class="node" r="33" fill="#f8efe8"></circle>
                <text class="node-label" text-anchor="middle" dy="5">Mercados</text>
              </g>
            </svg>
          </div>
          <p class="subtitle">Cuando dos ejes se tocan, puede aparecer una pregunta mejor. <br>Ejemplo: <strong>tecnología + empleo</strong> o <strong>regulación + plataformas</strong>.</p>
        </div>
      </section>

      <section class="slide" data-slide>
        <p class="slide-tag">Método de comparación</p>
        <div class="slide-main">
          <h2 class="title">Guía: cómo comparar noticias del foro en clave del curso</h2>
          <div class="grid-two">
            <article class="card">
              <h3>Secuencia de 4 preguntas</h3>
              <ol class="list">
                <li>¿Qué actor decide? (Estado, empresa, organismo, plataforma).</li>
                <li>¿Qué regla o incentivo está en juego?</li>
                <li>¿Quién gana, quién absorbe el costo y en qué territorio?</li>
                <li>¿Qué cambio laboral/social deja ver?</li>
              </ol>
            </article>
            <article class="card">
              <h3>Plantilla comparativa para exponer hoy</h3>
              <ol class="list">
                <li>Actor principal y capacidad de decisión.</li>
                <li>Mecanismo de poder: norma, mercado, tecnología o fuerza.</li>
                <li>Efecto dominante en empleo/desigualdad/condiciones laborales.</li>
                <li>Escala dominante: local, nacional, regional o global.</li>
              </ol>
              <div class="pill-row">
                <span class="pill">Comparar</span>
                <span class="pill">Contrastar</span>
                <span class="pill">Argumentar</span>
              </div>
            </article>
          </div>
          <div class="actions">
            <button type="button" class="nav-btn" data-nav-step="-1">Anterior</button>
            <button type="button" class="nav-btn primary" data-nav-step="1">Siguiente</button>
          </div>
          <p class="hint">Atajos: ←/→ para navegar, D para abrir definiciones, Esc para cerrar pop-up.</p>
        </div>
      </section>
    </main>

    <footer class="bottombar">
      <span>Curso: Globalización y Empleo · Licenciatura en Negocios Internacionales</span>
      <span id="footerMeta">UNAM FCA · 2026-2</span>
      <div class="footer-tools">
        <button type="button" class="nav-btn" data-nav-step="-1">Anterior</button>
        <button type="button" class="nav-btn" data-nav-step="1">Siguiente</button>
        <span id="clock"></span>
      </div>
    </footer>
  </div>

  <div class="modal" id="defModal" data-open="false" aria-hidden="true">
    <div class="modal-backdrop" data-close="true"></div>
    <article class="modal-card" role="dialog" aria-modal="true" aria-labelledby="defTitle">
      <button class="modal-close" id="closeDefBtn" type="button">Cerrar</button>
      <h3 id="defTitle">Definición</h3>
      <p id="defBody"></p>
      <p id="defUse"></p>
    </article>
  </div>

  <script src="../foro_noticias/data_26feb26.js"></script>
  <script>
    (function () {
      const slides = Array.from(document.querySelectorAll("[data-slide]"));
      const progressBar = document.getElementById("progressBar");
      const progressLabel = document.getElementById("progressLabel");
      const clock = document.getElementById("clock");
      const statsGrid = document.getElementById("statsGrid");
      const axisList = document.getElementById("axisList");
      const participationText = document.getElementById("participationText");
      const latestDatePill = document.getElementById("latestDatePill");
      const topSourcePill = document.getElementById("topSourcePill");

      const modal = document.getElementById("defModal");
      const defTitle = document.getElementById("defTitle");
      const defBody = document.getElementById("defBody");
      const defUse = document.getElementById("defUse");

      const definitions = {
        globalizacion: {
          title: "Globalización",
          body: "Proceso histórico de integración desigual entre economías, tecnologías, normas y culturas a escala mundial.",
          use: "En este curso: no solo conecta mercados; también redistribuye riesgos, poder y oportunidades de empleo."
        },
        gobernanza: {
          title: "Gobernanza",
          body: "Conjunto de reglas y mecanismos mediante los cuales se coordina una actividad, aun sin un solo gobierno central.",
          use: "Úsala para distinguir quién regula de facto: Estado, agencia, plataforma o mercado."
        },
        multipolaridad: {
          title: "Multipolaridad",
          body: "Configuración internacional donde varios polos de poder compiten y negocian, sin hegemonía única estable.",
          use: "Sirve para explicar alianzas cambiantes y tensiones comerciales/geopolíticas."
        },
        cadena_suministro: {
          title: "Cadena de suministro",
          body: "Red de producción, transporte y distribución que conecta insumos, empresas, territorios y consumidores.",
          use: "Cualquier disrupción local puede convertirse en efecto global sobre costos, tiempos y empleo."
        },
        regulacion_privada: {
          title: "Regulación privada",
          body: "Normas impuestas por actores no estatales (agencias, certificadoras, plataformas, ratings) que ordenan el mercado.",
          use: "Permite ver cómo una decisión corporativa puede tener efectos regulatorios reales."
        },
        riesgo_sistemico: {
          title: "Riesgo sistémico",
          body: "Riesgo que no afecta solo a un actor, sino que puede propagarse en red y comprometer sectores completos.",
          use: "Clave para leer noticias sobre energía, finanzas, logística y plataformas digitales."
        }
      };

      const themeRules = [
        { key: "regulacion", label: "Regulación", patterns: [/regulaci[oó]n/, /gobernanza/, /corte suprema/, /ley aduanera/, /decreto/, /investigaci[oó]n/] },
        { key: "geopolitica", label: "Geopolítica", patterns: [/geopol[ií]tica/, /rusia/, /india/, /china/, /territorio/, /arancel/, /trump/] },
        { key: "empleo", label: "Trabajo y empleo", patterns: [/empleo/, /jornada/, /reforma laboral/, /cuidados/, /desigualdad/, /trabajador/] },
        { key: "tecnologia", label: "Tecnología/IA", patterns: [/inteligencia artificial|\bia\b/, /digital/, /centro de datos/, /automatizaci[oó]n/, /plataforma/] },
        { key: "mercados", label: "Mercados y finanzas", patterns: [/calificaci[oó]n/, /deuda/, /inversi[oó]n/, /mercado/, /ganancia/, /inflaci[oó]n/] },
        { key: "logistica", label: "Comercio y logística", patterns: [/comercio exterior/, /cadena/, /aduan/, /vuelos/, /aerol[ií]neas/, /log[ií]stica/] }
      ];

      const posts = Array.isArray(window.FORO_NOTICIAS_RAW) ? window.FORO_NOTICIAS_RAW.slice() : [];

      const state = {
        index: 0,
        lastDefKey: "globalizacion"
      };

      if (!slides.length) {
        return;
      }

      function setSlide(index) {
        const bounded = Math.max(0, Math.min(index, slides.length - 1));
        state.index = bounded;

        slides.forEach((slide, i) => {
          slide.classList.toggle("active", i === bounded);
        });

        const percent = ((bounded + 1) / slides.length) * 100;
        progressBar.style.width = percent + "%";
        progressLabel.textContent = (bounded + 1) + "/" + slides.length;
      }

      function go(step) {
        setSlide(state.index + step);
      }

      function updateClock() {
        const now = new Date();
        clock.textContent = now.toLocaleString("es-MX", {
          weekday: "short",
          day: "2-digit",
          month: "short",
          hour: "2-digit",
          minute: "2-digit"
        });
      }

      function stripHtml(html) {
        return String(html || "")
          .replace(/<!--[\s\S]*?-->/g, " ")
          .replace(/<[^>]+>/g, " ")
          .replace(/\s+/g, " ")
          .trim();
      }

      function extractDomains(text) {
        const matches = Array.from(String(text || "").matchAll(/https?:\/\/[^\s"'<>]+/g)).map((m) => m[0]);
        const domains = [];
        const seen = new Set();
        for (const url of matches) {
          try {
            const host = new URL(url).hostname.replace(/^www\./i, "").toLowerCase();
            if (host && !seen.has(host)) {
              seen.add(host);
              domains.push(host);
            }
          } catch (_) {}
        }
        return domains;
      }

      function firstSentence(text) {
        const clean = String(text || "").replace(/\s+/g, " ").trim();
        if (!clean) {
          return "Sin resumen disponible.";
        }
        const sentenceMatch = clean.match(/^[\s\S]*?[.!?](?:\s|$)/);
        const chunk = sentenceMatch ? sentenceMatch[0].trim() : clean;
        return chunk.length > 220 ? chunk.slice(0, 219).trimEnd() + "…" : chunk;
      }

      function shortDate(epochSeconds) {
        if (!epochSeconds) {
          return "s/f";
        }
        return new Date(Number(epochSeconds) * 1000).toLocaleDateString("es-MX", {
          day: "2-digit",
          month: "short",
          year: "numeric"
        });
      }

      function pickCase(regex, used) {
        const found = posts.find((post) => {
          if (!post || used.has(post.id)) {
            return false;
          }
          const text = ((post.subject || "") + " " + stripHtml(post.message || "")).toLowerCase();
          return regex.test(text);
        });
        if (found) {
          used.add(found.id);
        }
        return found || null;
      }

      function chooseCases() {
        const used = new Set();
        const sorted = posts.slice().sort((a, b) => (Number(b.created) || 0) - (Number(a.created) || 0));
        const byId = (id) => sorted.find((post) => Number(post.id) === id) || null;

        const a =
          pickCase(/shein|comisi[oó]n europea|investigaci[oó]n.*plataforma|e-commerce|comercio electr[oó]nico/i, used) ||
          byId(2183) ||
          sorted.find((post) => !used.has(post.id));
        if (a) used.add(a.id);

        const b =
          pickCase(/bat|job cuts|inteligencia artificial|ai boom|centros? de datos|openai|automatizaci[oó]n/i, used) ||
          byId(2193) ||
          sorted.find((post) => !used.has(post.id));
        if (b) used.add(b.id);

        const c =
          pickCase(/arancel|tariff|supreme court|rusia|india|china|multipolar|geopol[ií]tica/i, used) ||
          byId(2184) ||
          sorted.find((post) => !used.has(post.id));
        if (c) used.add(c.id);

        const selected = [a, b, c].filter(Boolean).slice(0, 3);
        while (selected.length < 3) {
          const fallback = sorted.find((post) => !used.has(post.id));
          if (!fallback) {
            break;
          }
          used.add(fallback.id);
          selected.push(fallback);
        }
        return selected;
      }

      function detectThemeLabel(post) {
        const text = ((post.subject || "") + " " + stripHtml(post.message || "")).toLowerCase();
        const hits = themeRules
          .map((rule) => ({ label: rule.label, score: rule.patterns.reduce((acc, pattern) => acc + (pattern.test(text) ? 1 : 0), 0) }))
          .filter((item) => item.score > 0)
          .sort((a, b) => b.score - a.score);
        return hits[0] ? hits[0].label : "Análisis transversal";
      }

      function renderCaseSlides() {
        const cases = chooseCases();
        state.selectedCases = cases;

        if (!caseGrid || !compareRows || !questionGrid) {
          return;
        }

        if (!cases.length) {
          caseGrid.innerHTML = '<article class="case-card"><h4>No se encontraron casos del foro.</h4></article>';
          compareRows.innerHTML = "";
          questionGrid.innerHTML = '<article class="question-card"><h4>Sin datos</h4><p>Revisa la carga de `../foro_noticias/data_26feb26.js`.</p></article>';
          return;
        }

        const labels = ["Caso A", "Caso B", "Caso C"];
        caseGrid.innerHTML = cases.map((post, idx) => {
          const domain = extractDomains(post.message || "")[0] || "fuente no detectada";
          const summary = firstSentence(stripHtml(post.message || ""));
          const axis = detectThemeLabel(post);
          return [
            '<article class="case-card">',
            '<span class="case-kicker">' + labels[idx] + " · " + axis + "</span>",
            "<h4>" + (post.subject || "Sin título") + "</h4>",
            '<p class="case-meta"><strong>' + (post.userfullname || "Sin autor") + "</strong> · " + shortDate(post.created) + " · " + domain + "</p>",
            '<p class="case-excerpt">' + summary + "</p>",
            "</article>"
          ].join("");
        }).join("");

        const [caseA, caseB, caseC] = cases;
        if (compareHeadA) compareHeadA.textContent = (caseA && caseA.subject) ? caseA.subject.slice(0, 52) : "Caso A";
        if (compareHeadB) compareHeadB.textContent = (caseB && caseB.subject) ? caseB.subject.slice(0, 52) : "Caso B";
        if (compareHeadC) compareHeadC.textContent = (caseC && caseC.subject) ? caseC.subject.slice(0, 52) : "Caso C";

        function actorGuess(post) {
          const text = ((post.subject || "") + " " + stripHtml(post.message || "")).toLowerCase();
          if (/corte suprema|comisi[oó]n europea|gobierno|decreto|ley/.test(text)) return "Institución pública / estatal";
          if (/empresa|corporaci[oó]n|shein|bat|openai|google|meta|microsoft/.test(text)) return "Empresa / actor corporativo";
          if (/oxfam|organiza|sociedad civil/.test(text)) return "Organización social";
          return "Actor mixto";
        }

        function mechanismGuess(post) {
          const text = ((post.subject || "") + " " + stripHtml(post.message || "")).toLowerCase();
          if (/arancel|tariff|sanci[oó]n|regulaci[oó]n|investigaci[oó]n/.test(text)) return "Regla formal (norma/política)";
          if (/algorit|ia|automatizaci[oó]n|digital|centro de datos/.test(text)) return "Infraestructura tecnológica";
          if (/calificaci[oó]n|deuda|mercado|inversi[oó]n/.test(text)) return "Señal de mercado/finanzas";
          return "Combinación de norma + mercado";
        }

        function effectGuess(post) {
          const text = ((post.subject || "") + " " + stripHtml(post.message || "")).toLowerCase();
          if (/empleo|trabajo|jornada|desigualdad|cuidados/.test(text)) return "Impacto laboral/social directo";
          if (/precios|costos|inflaci[oó]n|competitividad/.test(text)) return "Impacto económico indirecto";
          return "Impacto en gobernanza y condiciones de mercado";
        }

        const rowsDef = [
          { label: "Actor principal", fn: actorGuess },
          { label: "Mecanismo de poder", fn: mechanismGuess },
          { label: "Efecto dominante", fn: effectGuess },
          { label: "Pregunta de seguimiento", fn: (post) => "¿Qué indicador usarías para evaluar este caso en 6 meses?" }
        ];

        compareRows.innerHTML = rowsDef.map((row) => {
          const cols = cases.map((post) => "<td>" + row.fn(post) + "</td>").join("");
          return "<tr><th>" + row.label + "</th>" + cols + "</tr>";
        }).join("");

        const titles = cases.map((post) => post.subject || "el caso");
        questionGrid.innerHTML = [
          '<article class="question-card"><h4>Pregunta 1: poder y regla</h4><p>Entre <strong>' + titles[0] + "</strong> y <strong>" + titles[2] + "</strong>, ¿qué caso muestra un mecanismo más explícito de control político sobre el mercado?</p></article>",
          '<article class="question-card"><h4>Pregunta 2: tecnología y empleo</h4><p>En <strong>' + titles[1] + "</strong>, ¿el cambio tecnológico abre oportunidades o desplaza empleo? ¿Qué evidencia pedirías para responder con rigor?</p></article>",
          '<article class="question-card"><h4>Pregunta 3: conexión transversal</h4><p>¿Qué patrón común aparece en los tres casos sobre quién define reglas y quién absorbe los costos sociales?</p></article>'
        ].join("");
      }

      function computeMetrics() {
        if (!posts.length) {
          return null;
        }

        const authors = new Set();
        const domains = new Map();
        const themeCounts = new Map();
        let totalWords = 0;
        let latestCreated = 0;

        for (const post of posts) {
          authors.add(post.userfullname || "Sin nombre");
          totalWords += Number(post.wordcount) || 0;
          latestCreated = Math.max(latestCreated, Number(post.created) || 0);

          const domainsInPost = extractDomains(post.message || "");
          domainsInPost.forEach((domain) => {
            domains.set(domain, (domains.get(domain) || 0) + 1);
          });

          const text = (post.subject || "") + " " + stripHtml(post.message || "");
          const lower = text.toLowerCase();
          for (const rule of themeRules) {
            if (rule.patterns.some((pattern) => pattern.test(lower))) {
              themeCounts.set(rule.label, (themeCounts.get(rule.label) || 0) + 1);
            }
          }
        }

        const topSources = Array.from(domains.entries()).sort((a, b) => b[1] - a[1]).slice(0, 5);
        const topThemes = Array.from(themeCounts.entries()).sort((a, b) => b[1] - a[1]).slice(0, 6);

        return {
          totalPosts: posts.length,
          totalAuthors: authors.size,
          totalDomains: domains.size,
          totalWords,
          latestCreated,
          topSources,
          topThemes
        };
      }

      function renderMetrics() {
        const metrics = computeMetrics();
        if (!metrics) {
          statsGrid.innerHTML = '<article class="stat"><strong>0</strong><span>sin datos</span></article>';
          participationText.textContent = "No se cargaron datos del foro. Revisa la ruta ../foro_noticias/data_26feb26.js";
          return;
        }

        const stats = [
          [metrics.totalPosts, "Noticias publicadas"],
          [metrics.totalAuthors, "Participantes"],
          [metrics.totalDomains, "Sitios fuente"],
          [metrics.totalWords.toLocaleString("es-MX"), "Palabras escritas"]
        ];

        statsGrid.innerHTML = stats
          .map(([value, label]) => '<article class="stat"><strong>' + value + "</strong><span>" + label + "</span></article>")
          .join("");

        const topSource = metrics.topSources[0] ? metrics.topSources[0][0] + " (" + metrics.topSources[0][1] + ")" : "Sin dominio";
        const latestText = metrics.latestCreated
          ? new Date(metrics.latestCreated * 1000).toLocaleString("es-MX", {
            day: "2-digit",
            month: "short",
            year: "numeric",
            hour: "2-digit",
            minute: "2-digit"
          })
          : "sin fecha";

        latestDatePill.textContent = "Corte: " + latestText;
        topSourcePill.textContent = "Fuente líder: " + topSource;

        const sourceNames = metrics.topSources.slice(0, 3).map((entry) => entry[0]).join(", ");
        participationText.textContent =
          "El foro ya reúne " + metrics.totalPosts +
          " noticias de " + metrics.totalAuthors +
          " estudiantes, con cobertura de fuentes como " +
          (sourceNames || "múltiples medios") +
          ". Esto ya es suficiente para análisis comparativo en clase.";

        axisList.innerHTML = metrics.topThemes.length
          ? metrics.topThemes
            .map((entry, idx) => {
              const max = metrics.topThemes[0][1] || 1;
              const width = Math.max(18, Math.round(entry[1] / max * 100));
              return [
                '<li class="axis-item">',
                '<strong>' + entry[0] + '</strong>',
                '<div class="axis-line"><i style="width:' + width + '%"></i></div>',
                '<span style="font-size:.82rem;color:#4f4a42;">Aparece en ' + entry[1] + ' noticia(s)</span>',
                idx === 0 ? '<button class="def-btn" data-def="globalizacion">¿Cómo se conecta con globalización?</button>' : "",
                "</li>"
              ].join("");
            })
            .join("")
          : '<li class="axis-item">Sin ejes detectados aún.</li>';
      }

      function openDefinition(key) {
        const item = definitions[key] || definitions.globalizacion;
        state.lastDefKey = key;
        defTitle.textContent = item.title;
        defBody.textContent = item.body;
        defUse.textContent = item.use;
        modal.dataset.open = "true";
        modal.setAttribute("aria-hidden", "false");
      }

      function closeDefinition() {
        modal.dataset.open = "false";
        modal.setAttribute("aria-hidden", "true");
      }

      function setupEvents() {
        document.addEventListener("click", (event) => {
          const nav = event.target && event.target.closest ? event.target.closest(".nav-btn[data-nav-step]") : null;
          if (nav) {
            event.preventDefault();
            const step = Number(nav.getAttribute("data-nav-step"));
            if (Number.isFinite(step)) {
              go(step);
            }
            return;
          }

          const trigger = event.target && event.target.closest ? event.target.closest(".def-btn[data-def]") : null;
          if (trigger) {
            event.preventDefault();
            const key = trigger.getAttribute("data-def") || "globalizacion";
            openDefinition(key);
            return;
          }

          const close = event.target && event.target.closest ? event.target.closest("#closeDefBtn, [data-close=\"true\"]") : null;
          if (close) {
            event.preventDefault();
            closeDefinition();
          }
        });

        document.addEventListener("keydown", (event) => {
          if (event.key === "ArrowRight" || event.key === "PageDown") {
            go(1);
          }
          if (event.key === "ArrowLeft" || event.key === "PageUp") {
            go(-1);
          }
          if (event.key.toLowerCase() === "d") {
            openDefinition(state.lastDefKey || "globalizacion");
          }
          if (event.key === "Escape") {
            closeDefinition();
          }
        });
      }

      function safeRun(fn, label) {
        try {
          fn();
        } catch (error) {
          const footer = document.getElementById("footerMeta");
          if (footer) {
            footer.textContent = "Aviso técnico: hubo un error en " + label + ".";
          }
          if (typeof console !== "undefined" && console.error) {
            console.error("[presentacion_foro_noticias_hoy] Error en " + label, error);
          }
        }
      }

      safeRun(setupEvents, "setupEvents");
      safeRun(renderMetrics, "renderMetrics");
      safeRun(renderCaseSlides, "renderCaseSlides");
      safeRun(function () { setSlide(0); }, "setSlide");
      safeRun(updateClock, "updateClock");
      setInterval(function () { safeRun(updateClock, "updateClock"); }, 30000);

      document.getElementById("footerMeta").textContent =
        "UNAM FCA · Globalización y Empleo · " +
        new Date().toLocaleDateString("es-MX", { day: "2-digit", month: "short", year: "numeric" });
    })();
  </script>
</body>
</html>
